<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <script type="application/ld+json">
  {
    "@context" : "http://schema.org",
    "@type"    : "WebSite",
    "name"     : "tbrk.org",
    "alternateName" : "Timothy Bourke",
    "url"      : "http://www.tbrk.org"
  }
  </script>
    <link rel="stylesheet" href="../css/bootstrap.min.css" type="text/css" />
    <title>Timothy Bourke - Treeplate</title>
<!--[if lt IE 7]>
    <style type='text/css'>
	html { overflow: auto; }
	body { overflow: hidden; font-size: 100%; }
	div#container { overflow: auto; }
    </style>
    <script type="text/javascript">onload = function() {
	try {container.focus() } catch {} }</script>
  <![endif]-->
    <link rel="shortcut icon" href="../favicon.ico" />
    <meta name="description" content="Xslt scripts for generating a static website." />
    <link rel="home" title="Home" href="../index.html" />
    <link rel="first" title="FreeBSD" href="freebsd.html" />
    <link rel="prev" title="Muttlight" href="muttlight.html" />
    <link rel="last" title="Miscellany" href="miscellany.html" />
    <link rel="next" title="Urpal" href="urpal.html" />
    <link rel="up" title="Software" href="index.html" />
    <link rel="author" title="Timothy Bourke" href="https://plus.google.com/106045092518852678199?rel=author" />
    <meta name="keywords" content="xslt, xhtml" />
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link rel="stylesheet" href="../css/bigfoot.min.css" type="text/css" />
  </head>
  <body>
    <div class="tp-all">
      <div class="tp-all-inner">
        <div class="tp-content-container">
          <div class="tp-content">
            <div id="main" class="main">
<h1>Treeplate</h1>

<p>Treeplate is a set of xslt scripts for generating static websites.
Authors write xhtml content by hand and provide a description of the 
site hierarchy.
Treeplate generates the site, automatically fitting the content into 
boilerplate xhtml for</p>
<ul>
    <li>headers, including stylesheet, icon, and <a href="http://www.w3.org/TR/REC-html40/struct/links.html#h-12.1.2">relation
    links</a>,</li>
    <li>footers, including author and last changed date,</li>
    <li>a hierarchical menu bar without scripting, like the one at left, and,</li>
    <li>a <a href="http://www.sitemaps.org">sitemap</a> file for search engines.</li>
</ul>

<p>Treeplate also adds alternating class attributes to table 
rows—<code>class="row0"</code>, <code>class="row1"</code>—so that they can 
be coloured by a stylesheet if desired.
There is an import feature for inserting generated content, like, for 
example, this <a href="snespp.html">manual page</a>, and a feature for
adding footnotes.<sup><a href="#footnote_1">1</a></sup>
The boilerplate generation makes it easy to experiment with specialized 
support for troublesome browser software without having to manually edit 
all pages.
Similarly, site redesigns may only require changes to the stylesheet and 
automatically-generated elements.
</p>

<p>If your (planned) website is predominantly static and you prefer to 
create it in a text editor but you want to avoid the tedium of 
copy-paste-modify for the common bits, then Treeplate could be for you!</p>

<p>This website was generated by Treeplate.</p>

<h2 id="download">Download</h2>

<p>Treeplate is released under a <a href="bsdlicense2008.html">BSD license</a>.
It may be used and modified without restriction but no guarantees or support are offered.
Nevertheless, patches, problem reports, and suggestions for improvement (in keeping
with the minimalist philosophy) are <a href="mailto:tim@tbrk.org">welcomed</a>.</p>

<p>The current version is available for download: <a href="https://github.com/tbrk/treeplate/archive/treeplate-1.2.2.tar.gz">Treeplate 1.2.2</a> <b>(20090422)</b>.
It is intended for unix systems and requires a Bourne shell and <a href="http://xmlsoft.org/XSLT/xsltproc2.html">xsltproc</a>.
It should also work with other xslt processors and only requires xslt 1.0,
xpath 1.0, and the
<a href="http://www.exslt.org/exsl/elements/document">exsl:document</a> extension.
</p>

<p>The source code is kept at
  <a href="https://github.com/tbrk/treeplate">git@github.com:tbrk/treeplate.git</a>.</p>

<h2 id="operation">Operation</h2>

<div class="container-fluid" id="fig_1">
  <figure>
    <img id="fig_1img" src="treeplate.png" alt="treeplate, inputs: sitetree.xml, sitemaps.xml, outputs: sitemap.xml, sitepages.html" title="Figure 1: Source and destination files" class="img-fluid" />
    <figcaption>
	<span class="caption">Figure 1:</span> Source and destination files<sup><a href="#footnote_2">2</a></sup>
    </figcaption>
  </figure>
</div>

<p>Treeplate requires these files and directories:</p>
<table class="table table-sm">
<tr><td>src</td>
    <td>Contains <code>sitetree.xml</code> and the content <code>sitepage</code> files.</td>
</tr>
<tr><td>dst</td>
    <td>Must replicate the directory structure of <code>src</code>.
    Contains any non-generated files, such as css style sheets, images, and 
    pdf documents.</td>
</tr>
<tr><td>xsltsrc</td>
    <td>Contains the xslt scripts; <code>makepage.xsl</code> can be modified
    to change the boilerplate.</td>
</tr>
<tr><td>makesite.sh</td>
    <td>This simple shell script transforms xml files in <code>src</code> 
    into html files in <code>dst</code>.</td>
</tr>
</table>

<h3 id="sitetree">The sitetree.xml file</h3>

<p>The <code>sitetree.xml</code> file describes the hierarchical structure
of a site.
An edited extract from this website is:</p>
<pre>
&lt;!DOCTYPE sitetree SYSTEM "sitetree.dtd"&gt;
&lt;sitetree&gt;
    &lt;rooturl&gt;http://www.tbrk.org&lt;/rooturl&gt;
    &lt;prefix&gt;Timothy Bourke - &lt;/prefix&gt;
    &lt;style&gt;basic.css&lt;/style&gt;
    &lt;icon&gt;favicon.ico&lt;/style&gt;

    &lt;item homelink="yes" priority="1.0"&gt;
	&lt;name&gt;Home&lt;/name&gt;
	&lt;file&gt;index&lt;/file&gt;

	&lt;item directory="papers"&gt;
	    &lt;name&gt;Papers&lt;/name&gt;
	    &lt;file&gt;abstracts&lt;/file&gt;
	&lt;/item&gt;

	&lt;item changefreq="yearly"&gt;
	    &lt;name&gt;Address&lt;/name&gt;
	    &lt;file&gt;mail&lt;/file&gt;
	&lt;/item&gt;
    &lt;/item&gt;

    &lt;item directory="software"&gt;
	&lt;name&gt;Software&lt;/name&gt;
	&lt;file&gt;index&lt;/name&gt;

	&lt;item&gt;Treeplate&lt;/name&gt;
	&lt;file&gt;treeplate&lt;/file&gt;
    &lt;/item&gt;
&lt;/sitetree&gt;
</pre>
<p>Two hierarchies are described: that of items as presented to visitors, and
that of the organisation on disk.
The latter may be simpler than the former and is expressed by the
<code>item</code> <code>directory</code> attributes.
The full list of item attributes is:</p>

<table class="table table-sm">
<tr><td><code>directory</code></td>
    <td>describes how the files are stored on disk.</td>
</tr>
<tr><td><code>inmenu</code></td>
    <td>if <code>"no"</code> the item is excluded from the navigation
    menu.</td>
</tr>
<tr><td><code>homelink</code></td>
    <td><code>"yes"</code> marks the home page (for relation links).</td>
</tr>
<tr><td><code>sitemap</code></td>
    <td>if <code>"no"</code> the item is excluded from
    <code>sitemap.xml</code>.</td>
</tr>
<tr><td><code>changefreq</code></td>
    <td>inserted directly into <code>sitemap.xml</code>.</td>
</tr>
</table>

<p>Each item may contain other items, and must contain two elements:</p>

<table class="table table-sm">
<tr><td><code>name</code></td>
    <td>Text used in titles and menus.</td>
</tr>
<tr><td><code>file</code></td>
    <td>Root name for the the source <code>.xml</code> and
    destination <code>.html</code> files.
    An optional <code>extension</code> attribute allows the destination file
    extension to be changed.
    An optional <code>url</code> attribute allows menu items to be directed
    elsewhere; a destination page is still generated.
    An optional <code>rellinkprefix</code> attribute is prefixed to relative
    site links from the generated page, which is occasionally useful for
    accounting for the <code>url</code> attribute's effects.</td>
</tr>
</table>

<p>Several settings can be set by adding the elements below to an
    <code>item</code>, or to the <code>sitetree</code> itself,
   they are inherited by that branch of the hierarchy:</p>

<table class="table table-sm">
<tr><td><code>prefix</code></td>
    <td>Text inserted into the page title.</td>
</tr>
<tr><td><code>suffix</code></td>
    <td>Text inserted into the page title.</td>
</tr>
<tr><td><code>author</code></td>
    <td>Author name, with <code>href</code> attribute.</td>
</tr>
<tr><td><code>style</code></td>
    <td>Filename of a css stylesheet.</td>
</tr>
<tr><td><code>script</code></td>
    <td>Optional script which may contain a <code>src</code>
    attribute containing the url of a script file.</td>
</tr>
<tr><td><code>icon</code></td>
    <td>Filename of a page icon.</td>
</tr>
<tr><td><code>link</code></td>
    <td>Additional relation links, for instance for <code>copyright</code> 
    and <code>content</code>, specified in a <code>rel</code> attribute; the 
    element must contain a url.</td>
</tr>
<tr><td><code>keyword</code></td>
    <td>Multiple keywords can be specified, they are not inherited if the 
    attribute <code>inherit</code> is <code>"no"</code>.
    Non-inherited keywords can also be specified in the page source files.</td>
</tr>
</table>

<p>The root <code>sitetree</code> element must contain <code>rooturl</code>, 
which is required to generate <code>sitemap.xml</code>.
All other generated links are relative.</p>

<h3 id="sitepage">The source files</h3>

<p>The source file for this page resembles:</p>

<pre>
&lt;!DOCTYPE sitepage SYSTEM "sitepage.dtd"&gt;
&lt;sitepage&gt;
    &lt;title&gt;Treeplate&lt;/title&gt;
    &lt;description&gt;Xslt scripts for generating a static website.&lt;/description&gt;
    &lt;lastmod&gt;$LastChangedDate: 2008-06-06 12:50:53 +1000 (Fri, 06 Jun 2008) $&lt;/lastmod&gt;
    &lt;keyword&gt;xslt&lt;/keyword&gt;&lt;keyword&gt;xhtml&lt;/keyword&gt;
    &lt;content&gt;
    &lt;h1&gt;Treeplate&lt;/h1&gt;
    &lt;p&gt;Treeplate is a set of xslt scripts for generating static websites.
    ...
    &lt;/content&gt;
&lt;/sitepage&gt;
</pre>

<p>The list of all possible <code>sitepage</code> elements:</p>

<table class="table table-sm">
<tr><td><code>title</code></td>
    <td>The page title.
        An inherited prefix or suffix can be ignored with, respectively, the
	attributes <code>prefix="no"</code> and <code>suffix="no"</code>.</td>
</tr>
<tr><td><code>description</code></td>
    <td>The page description.</td>
</tr>
<tr><td><code>lastmod</code></td>
    <td>The last modified date for insertion into the footer.
	The $ signs, from subversion tags, are removed if present.</td>
</tr>
<tr><td><code>keyword</code></td>
    <td>Associated keyword.
	Multiple <code>keyword</code> elements may be given.
	They are combined with the inherited keywords.</td>
</tr>
<tr><td><code>author</code></td>
    <td>Overrides the inherited <code>author</code> attribute.
    An <code>href</code> attribute must be given.</td>
</tr>
<tr><td><code>prepage</code></td>
    <td>Optional text for insertion before the opening <code>html</code>
	element.</td>
</tr>
<tr><td><code>header</code></td>
    <td>Optional additional elements for insertion into the destination
	<code>head</code>.
	An optional <code>charset</code> attribute allows a charset other
	than <code>UTF-8</code> to be specified.</td>
</tr>
<tr><td><code>style</code></td>
    <td>Optional filename of a page-specific css stylesheet.</td>
</tr>
<tr><td><code>script</code></td>
    <td>Optional page-specific script. It may contain a <code>src</code>
    attribute containing the url of a script file.</td>
</tr>
<tr><td><code>navbar</code></td>
  <td>Optionally construct a navigation bar on each page using the given
    text as the first label. A <code>class</code> attribute is permitted.</td>
</tr>
<tr><td><code>content</code></td>
    <td>Xhtml content for insertion into the generated page.
	<ul>
	<li>The content is usually wrapped in a <code>div</code> with 
	<code>id="main"</code>, but the <code>id</code> value can be
	overridden with a <code>mainid</code> attribute.</li>

	<li>The <code>footer="no"</code> attribute will disable the addition of 
	a page footer.</li>

	<li>A <code>class</code> attribute is added to <code>tr</code>
	elements, as described above, if they do not already have one.</li>

	<li>The content may contain <code>import</code> tags with an 
	<code>href</code> attribute, relative to the source file, to insert 
	generated content.</li>

	<li>The content may contain <code>footnote</code> tags containing
	inline html elements.
	Footnotes are replaced with a link to the full text.</li>
	</ul></td>
</tr>
<tr><td><code>postpage</code></td>
    <td>Optional text for insertion after the closing <code>html</code>
	element.</td>
</tr>
</table>

<p>Sometimes links change when a website is rearranged.
Redirection pages can be generated by giving <code>title</code> and 
<code>redirect</code> elements only.
The latter must have a single <code>href</code> attribute containing the
updated url.</p>

<h3 id="validation">Validation</h3>

<p>Document Type Definitions are provided for the <a href="../xml/sitetree.dtd">sitetree</a> and
<a href="../xml/sitepage.dtd">sitepage</a> files, they rely on the modular
xhtml 1.0 definitions,
but validation is disabled in <code>makesite.sh</code> by default.
It can be enabled by removing the <code>--novalid</code> option from the
call to <code>xsltproc</code>.</p>
</div>
            <div class="footnotes">
              <ol>
                <li id="footnote_1">Like this one!</li>
                <li id="footnote_2">
	  <a href="#fig_1">Figure 1</a> uses elements from <a href="http://commons.wikimedia.org/wiki/Image:XSLT_en.svg">Image:XSLT
		  en.svg</a> by Dreftymac.
	      It is released under a <a href="http://en.wikipedia.org/wiki/Creative_Commons">Creative
		  Commons</a> <a href="http://creativecommons.org/licenses/by/2.5/">Attribution
		  2.5</a> license.
	</li>
              </ol>
            </div>
          </div>
          <div class="tp-footer">
            <div class="tp-footercontent">
              <div class="tp-footer-author">Written by:
	<a href="https://plus.google.com/106045092518852678199?rel=author">Timothy Bourke</a></div>
              <div class="tp-footer-date">LastChangedDate: 2016-01-23 21:45:39 +0100</div>
            </div>
          </div>
        </div>
        <div class="tp-menu">
          <div class="tp-innermenu">
            <h2>Site menu</h2>
            <ul>
              <li>
                <a href="../index.html">Home</a>
              </li>
              <li>
                <a href="../papers/papers.html">Publications</a>
              </li>
              <li>
                <a href="index.html">Software</a>
                <ul>
                  <li>
                    <a href="freebsd.html">FreeBSD</a>
                  </li>
                  <li>
                    <a href="sml.html">Standard ML</a>
                  </li>
                  <li>
                    <a href="svgtoquiz.html">Svgtoquiz</a>
                  </li>
                  <li>
                    <a href="mnemogogo.html">Mnemogogo</a>
                  </li>
                  <li>
                    <a href="muttlight.html">Muttlight</a>
                  </li>
                  <li>
                    <span class="active">
                      <a href="treeplate.html">Treeplate</a>
                    </span>
                  </li>
                  <li>
                    <a href="urpal.html">Urpal</a>
                  </li>
                  <li>
                    <a href="miscellany.html">Miscellany</a>
                  </li>
                </ul>
              </li>
              <li>
                <a href="../synchronous.html">Synchronous</a>
              </li>
              <li>
                <a href="../itp.html">Theorem proving</a>
              </li>
            </ul>
          </div>
        </div>
        <div class="navbar tp-navbar bg-primary">
          <div id="navbarSupportedContent">
            <h2 style="display: none">Navigation Links</h2>
            <ul class="nav tp-nav">
              <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" href="../index.html">tbrk</a>
                <div class="dropdown-menu">
                  <a class="dropdown-item button tp-navbar-home" href="../index.html">Home</a>
                  <a class="dropdown-item button" href="../papers/papers.html">Publications</a>
                  <a class="dropdown-item button" href="../software/index.html">Software</a>
                  <a class="dropdown-item button" href="../synchronous.html">Synchronous</a>
                  <a class="dropdown-item button" href="../itp.html">Theorem proving</a>
                </div>
              </li>
              <li class="nav-item">/</li>
              <li class="nav-item dropdown">
                <a href="index.html" class="dropdown-toggle nav-link" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Software</a>
                <div class="dropdown-menu">
                  <a class="dropdown-item button" href="freebsd.html">FreeBSD</a>
                  <a class="dropdown-item button" href="sml.html">Standard ML</a>
                  <a class="dropdown-item button" href="svgtoquiz.html">Svgtoquiz</a>
                  <a class="dropdown-item button" href="mnemogogo.html">Mnemogogo</a>
                  <a class="dropdown-item button" href="muttlight.html">Muttlight</a>
                  <a class="dropdown-item button" href="treeplate.html">Treeplate</a>
                  <a class="dropdown-item button" href="urpal.html">Urpal</a>
                  <a class="dropdown-item button" href="miscellany.html">Miscellany</a>
                </div>
              </li>
              <li class="nav-item">/</li>
              <li class="nav-item active">Treeplate</li>
            </ul>
          </div>
        </div>
        <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js" integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4" crossorigin="anonymous"></script>
        <script src="../js/bootstrap.min.js"></script>
        <script src="../js/anchor.min.js"></script>
        <script>
  anchors.options = {
    placement: 'left'
  };
  anchors.add('h1[id],h2[id],h3[id],h4[id],h5[id]')
</script>
        <script src="../js/bigfoot.min.js"></script>
        <script>$.bigfoot()</script>
      </div>
    </div>
    <script type="application/ld+json">
    {
    "@context": "http://schema.org",
      "@type": "BreadcrumbList",
      "itemListElement": [
      
        {
          "@type": "ListItem",
          "position": 1,
          "item": {
            "@id": "http://www.tbrk.org/software/index.html",
            "name": "Software"
          }
          },
        {
          "@type": "ListItem",
          "position": 2,
          "item": {
            "@id": "http://www.tbrk.org/software/treeplate.html",
            "name": "Treeplate"
          }
          }
    ]}
    </script>
  </body>
</html>
